import{a as l,C as v,i as y}from"./index-44b8d3bd.js";import{i as g}from"./index-1dfa74ef.js";import"./work_hope_calender-04a2582c.js";import"./index-4cc2d798.js";window.axios=l;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var p=document.getElementById("calendar"),o,f,s,d;document.getElementById("bulkSelectDecision").addEventListener("click",function(){var e=document.getElementsByClassName("day-of-week-checks"),n=[];if(s===1){alert("シフト確定済みのためシフトを追加できません");return}if(d===1){alert("シフト公開済みのためシフトを追加できません");return}for(let a=0;a<7;a++)e[a].checked===!0&&n.push(e[a].value);var t=document.getElementsByName("shift-checks"),i="";for(let a=0;a<3;a++)t[a].checked===!0&&(i=t[a].value);n.length!=0&&i!=""&&l.post("/user/home/shift-hope/shift-bulk-add",{display_start_day:o,display_end_day:f,shift_checked:i,day_of_week_checked_list:n}).then(a=>{console.log(a),document.location.reload()}).catch(()=>{alert("登録に失敗しました")})});document.getElementById("bulkDeleteDecision").addEventListener("click",function(e,n,t){if(s===1){alert("シフト確定済みのためシフトを削除できません");return}if(d===1){alert("シフト公開済みのためシフトを削除できません");return}l.post("/user/home/shift-hope/shift-bulk-delete",{display_start_day:o,display_end_day:f}).then(()=>{document.location.reload()}).catch(()=>{alert("登録に失敗しました")})});document.getElementById("userShiftConfirmDecision").addEventListener("click",function(e,n,t){l.post("/user/home/shift-hope/user-shift-confirm",{display_start_day:o}).then(i=>{i.data?(document.getElementById("userShiftConfirmButton").innerText="確定取り消し",document.getElementById("userShiftConfirmText").innerText="希望シフト:  確定",document.getElementById("userShiftConfirmModalMessage").innerText="希望シフトを取り消しますか？",s=1):(document.getElementById("userShiftConfirmButton").innerText="シフト確定",document.getElementById("userShiftConfirmText").innerText="希望シフト:  未確定",document.getElementById("userShiftConfirmModalMessage").innerText="希望シフトを確定しますか？",s=0)}).catch(()=>{alert("登録に失敗しました")})});var h=new Date,u=new Date(h);u.setMonth(h.getMonth()+1);let c=new v(p,{plugins:[g,y],initialView:"dayGridMonth",initialDate:u,headerToolbar:{left:"",center:"title",right:""},locale:"ja",selectable:!0,select:function(e){var n=e.start.toISOString().slice(0,10),t=new Date(e.end.getTime()-24*60*60*1e3).toISOString().slice(0,10);if(n!==t){alert("一日だけ選択してください");return}if(s===1){alert("シフト確定済みのためシフトを追加できません");return}if(d===1){alert("シフト公開済みのためシフトを追加できません");return}var i=null;$("#exampleModal").modal("show").on("click",function(){$(".early-shift-btn, .late-shift-btn, .fulltime-shift-btn").off("click")}),$(".early-shift-btn, .late-shift-btn, .fulltime-shift-btn").on("click",function(){i=$(this).text(),i&&l.post("/user/home/shift-hope/shift-add",{start_date:e.start.valueOf(),end_date:e.end.valueOf(),shift_type:i}).then(()=>{document.location.reload()}).catch(()=>{alert("登録に失敗しました")}),$("#exampleModal").hide(),$(".early-shift-btn, .late-shift-btn, .fulltime-shift-btn").off("click")})},events:function(e,n,t){o=e.start.valueOf(),f=e.end.valueOf();const i=l.post("shift-hope/shift-get",{start_date:e.start.valueOf(),end_date:e.end.valueOf()}),a=l.post("shift-hope/shift-status-get",{start_date:e.start.valueOf(),end_date:e.end.valueOf()});Promise.all([i,a]).then(r=>{const m=r[0].data,_=r[1].data;c.removeAllEvents(),console.log(r),n([...m,..._])}).catch(()=>{document.location.reload()}),l.post("../../admin/shift-planning/shift-planning-add",{start_date:e.start.valueOf(),end_date:e.end.valueOf()}).then(r=>{}).catch(r=>{alert("登録に失敗しました")}),l.post("/user/home/shift-hope/user-shift-confirm-status-get",{display_start_day:o}).then(r=>{s=r.data[0],d=r.data[1],console.log(r.data),s?(document.getElementById("userShiftConfirmButton").innerText="確定取り消し",document.getElementById("userShiftConfirmText").innerText="希望シフト: 確定",document.getElementById("userShiftConfirmModalMessage").innerText="希望シフトを取り消しますか？"):(document.getElementById("userShiftConfirmButton").innerText="シフト確定",document.getElementById("userShiftConfirmText").innerText="希望シフト:  未確定",document.getElementById("userShiftConfirmModalMessage").innerText="希望シフトを確定しますか？")}).catch(r=>{alert("登録に失敗しました")})},eventClick:function(e){var n=e.event._def.title;if(n.trim().charAt(0)==="_"||n===""){var t=null;$("#exampleModal").modal("show").on("click",function(){$(".early-shift-btn, .late-shift-btn, .fulltime-shift-btn").off("click")}),$(".early-shift-btn, .late-shift-btn, .fulltime-shift-btn").on("click",function(){if(s===1){alert("シフト確定済みのためシフトを追加できません");return}if(d===1){alert("シフト公開済みのためシフトを追加できません");return}t=$(this).text(),console.log(t),t&&(console.log(),l.post("/user/home/shift-hope/shift-add",{start_date:e.event._instance.range.start.valueOf(),end_date:e.event._instance.range.end.valueOf(),shift_type:t}).then(()=>{c.addEvent({title:t,start:e.event._instance.range.start,end:e.event._instance.range.end,allDay:!0},!0),document.location.reload()}).catch(()=>{alert("登録に失敗しました")})),$("#exampleModal").hide(),$(".early-shift-btn, .late-shift-btn, .fulltime-shift-btn").off("click")})}else{if(s===1){alert("シフト確定済みのためシフトを削除できません");return}if(d===1){alert("シフト公開済みのためシフトを削除できません");return}confirm("削除しますか？")&&(l.post("shift-hope/shift-delete",{start_date:e.event._instance.range.start.valueOf(),end_date:e.event._instance.range.end.valueOf()}).then(()=>{document.location.reload()}).catch(()=>{alert("削除に失敗しました")}),e.event.remove())}}});c.render();
