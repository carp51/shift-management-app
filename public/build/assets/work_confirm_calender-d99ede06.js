import{a as r,C as h,i as m}from"./index-73320e29.js";import{i as v}from"./index-3666857a.js";var _=document.getElementById("work_confirm_calendar"),o=new Date,i=new Date(o);i.setMonth(o.getMonth()+1);var l,c,s=0;document.getElementById("shiftTempCreate").addEventListener("click",function(e){console.log(e),confirm("従業員の希望シフトを従業員に公開するシフトに上書きしますか？")&&r.post("/user/work/shift-temp-create",{start_date:l,end_date:c}).then(a=>{console.log(a.data),document.location.reload()}).catch(()=>{alert("登録に失敗しました")})});document.getElementById("shiftShow").addEventListener("click",function(e){if(console.log(e),console.log(l),s)var a="シフトの公開を取り消しますか？";else var a="シフトを公開しますか";confirm(a)&&r.post("/user/work/confirm/shift-show",{display_start_date:l}).then(n=>{console.log(n.data),document.location.reload()}).catch(()=>{alert("登録に失敗しました")})});let d=new h(_,{schedulerLicenseKey:"CC-Attribution-NonCommercial-NoDerivatives",plugins:[m,v],initialView:"resourceTimelineMonth",initialDate:i,headerToolbar:{left:"",center:"title",right:""},locale:"ja",contentHeight:"auto",editable:!0,resourceAreaHeaderContent:"従業員",resources:[],selectable:!0,select:function(e){var a=e.start.toISOString().slice(0,10),n=new Date(e.end.getTime()-24*60*60*1e3).toISOString().slice(0,10);if(a!==n){alert("一日だけ選択してください");return}var t=null;$("#exampleModal").modal("show").on("click",function(){$(".early-shift-btn, .late-shift-btn, .fulltime-shift-btn").off("click")}),$(".early-shift-btn, .late-shift-btn, .fulltime-shift-btn").on("click",function(){t=$(this).text(),console.log(e),t&&r.post("/user/work/confirm/shift-add",{start_date:e.start.valueOf(),end_date:e.end.valueOf(),shift_type:t,user_id:e.resource._resource.id}).then(()=>{document.location.reload()}).catch(()=>{alert("登録に失敗しました")}),$("#exampleModal").hide(),$(".early-shift-btn, .late-shift-btn, .fulltime-shift-btn").off("click")})},events:function(e,a,n){l=e.start.valueOf(),c=e.end.valueOf(),console.log(e),r.post("work/all-member-get",{display_start_day:e.start.valueOf(),display_status:"confirm"}).then(t=>{var u=t.data,f=u;d.setOption("resources",f)}).catch(()=>{alert("登録に失敗しました")}),r.post("work/confirm/all-shift-get",{start_date:e.start.valueOf(),end_date:e.end.valueOf()}).then(t=>{a(t.data)}).catch(()=>{alert("登録に失敗しました")}),r.post("work/confirm/shift-show-status-get",{start_date:e.start.valueOf()}).then(t=>{t.data?(document.getElementById("shiftShow").innerText="シフトの公開を取り消す",s=1):(document.getElementById("shiftShow").innerText="シフトを公開する",s=0)}).catch(()=>{alert("登録に失敗しました")})},eventClick:function(e){console.log(e.event._instance.range.start.valueOf()),confirm("削除しますか？")&&(r.post("work/confirm/shift-delete",{start_date:e.event._instance.range.start.valueOf(),end_date:e.event._instance.range.end.valueOf(),user_id:e.event._def.resourceIds}).then(()=>{}).catch(()=>{alert("削除に失敗しました")}),e.event.remove())}});d.render();
